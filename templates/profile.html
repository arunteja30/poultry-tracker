{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <h2>Super Admin Profile</h2>
  <div class="card mb-4">
    <div class="card-body">
      <p><strong>Username:</strong> {{ current_user.username }}</p>
      <p><strong>Role:</strong> {{ current_user.role }}</p>
      <p><strong>Email:</strong> {{ current_user.email or '-' }}</p>
      <p><strong>Full Name:</strong> {{ current_user.full_name or '-' }}</p>
      <p><strong>Phone:</strong> {{ current_user.phone or '-' }}</p>
    </div>
  </div>

  {% if current_user.role == 'super_admin' %}
  <div class="card mb-4">
    <div class="card-header">
      <h5>View Company Details</h5>
    </div>
    <div class="card-body">
      <div class="mb-3">
        <label for="company_id" class="form-label">Select Company</label>
        <select class="form-control" id="company_id" onchange="switchCompany()">
          <option value="">Choose a company</option>
          {% for company in get_all_companies() %}
          <option value="{{ company.id }}" {% if session.selected_company_id == company.id|string %}selected{% endif %}>
            {{ company.name }} ({{ company.code }})
          </option>
          {% endfor %}
        </select>
      </div>
      <script>
        function switchCompany() {
          const companyId = document.getElementById('company_id').value;
          if (companyId) {
            window.location.href = "{{ url_for('switch_company', company_id='__COMPANY_ID__') }}".replace('__COMPANY_ID__', companyId);
          }
        }
      </script>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
